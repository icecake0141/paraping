# Copyright 2025 icecake0141
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# This file was created or modified with the assistance of an AI (Large Language Model).
# Review required for correctness, security, and licensing.

name: PR Native Build Check

on:
  pull_request:
    branches: [main, master]
    paths:
      - "src/native/**"
      - "Makefile"
      - ".github/workflows/pr-checks.yml"

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  native-build:
    name: Native Build Validation
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: Checkout code
        uses: actions/checkout@v6

      - name: Build native components
        run: |
          if [ -f src/native/Makefile ]; then
            make build
          else
            echo "No native Makefile found at src/native/Makefile; skipping build"
          fi
